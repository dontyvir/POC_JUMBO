<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><!-- InstanceBegin template="/Templates/fullbody.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
<META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE">
<META HTTP-EQUIV="EXPIRES" CONTENT="Mon, 22 Jul 2002 11:12:01 GMT">
<!-- InstanceBeginEditable name="doctitle" -->
<title>Jumbo.cl Back Office Central</title>
<!-- InstanceEndEditable -->

<!-- InstanceBeginEditable name="head" --><!-- InstanceEndEditable -->

<link href="estilos.css" rel="stylesheet" type="text/css">
<!--link href="../default.css" rel="stylesheet" type="text/css"-->
<style type="text/css">
<!--
.style1 {color: #666666}
-->
</style>
</head>

<body>
<link rel="stylesheet" href="menu/menu.css">
<script language="JavaScript" src="menu/menu.js"></script>
<script language="JavaScript" src="menu/menu_tpl.js"></script>
<script language="JavaScript" src="menu/menu_items.js"></script>
<script language="JavaScript" src="popup.js"></script>
<script language="JavaScript" src="funciones.js"></script>
<script language="JavaScript" src="js/jquery-1.6.2.min.js"></script>
<script language="JavaScript" src="js/aphanumeric.js"></script>
<script language="JavaScript" src="js/codigosTelefonicos.js"></script>
<table width="780" height="100%" border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td height="78" valign="top">
	
	<TABLE width="100%" height=59 border=0 align="center" cellpadding="0" cellspacing="0" bgcolor="#ffffff">
	  <TR>
		<TD width=275 height="59" align=left class=user><img src="img/header2.jpg" width="275" height="60"></TD>
		<TD width=505 align=left valign="bottom" background="img/bg-1.jpg" class=user><table width="90%"  border="0" align="center" cellpadding="0" cellspacing="2">
          <tr>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td><div align="right" class="infoBL">Usuario: {hdr_nombre}&nbsp;&nbsp;| {hdr_fecha}</div></td>
          </tr>
        </table></TD>
	  </TR>
	</TABLE>
	<TABLE width="100%" height=19 border=0 align="center" cellpadding="0" cellspacing="0" bgcolor="#f1f0e9" style="border-top:1px solid #ABABAB; border-bottom:1px solid #ABABAB">
	  <TR>
		<TD align=left bgcolor="#FFFFFF" class=user></TD>
		</TR>
	</TABLE>

	
	</td>
  </tr>
  <tr height="400">
    <td valign="top" bgcolor="#FFFFFF">
      <table border=0 width="100%" class='ContentTitle'>
        <tr>
          <td width="53%" height="20" class='HeaderTitle'><!-- InstanceBeginEditable name="Titulo" -->
			Wizard Empresas Paso 1 - Creación de Empresa <!-- InstanceEndEditable --></td>
          <td width="47%" class='HeaderTitle'><!-- InstanceBeginEditable name="Botonera" -->
            <img src="img/1b.gif" width="40" height="40"><img src="img/2a.gif" width="40" height="40"><img src="img/3a.gif" width="40" height="40"><img src="img/4a.gif" width="40" height="40">
          <!-- InstanceEndEditable --></td>
        </tr>
      </table>
	  <br>
      <table width="100%"  border="0" cellspacing="2" cellpadding="2">
        <tr valign="top">
          <td width="71%"><!-- InstanceBeginEditable name="Izquierda" -->
          <script language="JavaScript" src="funciones.js"></script>
          <script language="JavaScript">
          function validaFono(cod,num,campo){
          		var codigo1 = cod;
				var numero1 = num;
				var tipofono;
				if (codigo1==9){//si es celular
					numero = numero1.slice(- 7);
					codigo = numero1.substr(0,1);
					if (codigo<5){
						alert("El primer numero de un celular debe ser entre 5 y 9.");
						campo.value="";
						campo.focus();
						return false;
					}	
					tipofono="celular";
				}else if (codigo1==2){//si es telefono santiago
					numero = numero1.slice (- 8);
					codigo = codigo1;
					tipofono="santiago";
				}else{//si es telefono regiones
					numero = numero1;
					codigo = codigo1;
					tipofono="region";
				}
				if ((Trim(numero)).length <7 &&(tipofono=="region")){
					alert("Debe ingresar el número de fono correctamente.");
					campo.focus();
					return false;
				}else if((Trim(numero1)).length <8 &&(tipofono!="region")){
					alert("Debe ingresar el número de fono correctamente.");
					campo.focus();
					return false;
				}
				return true;
          	}
            function guardar(form){
          		if( validar_obligatorio( form.rut, 	"El Rut es obligatorio" ) ) return false;
          		if( validar_obligatorio( form.dv, 	"El Digito Verificador es obligatorio")) return false;
          		if( validar_obligatorio( form.raz_social, "La Razon Social es obligatorio" ) ) return false;
          		if( validar_obligatorio( form.nombre, "El Nombre es obligatorio")) return false;
          		if( validar_obligatorio( form.rubro, "El Rubro es obligatorio")) return false;
          		if( validar_obligatorio( form.descrip, 	"La Descripcion es obligatorio" ) ) return false;
          		if( validar_obligatorio( form.cant_emp, "La Cantidad de empleados es obligatorio")) return false;
          		if( validar_obligatorio( form.nom_cont, "El nombre del contacto es obligatorio")) return false;
          		if( validar_obligatorio( form.cargo, 	"El cargo es obligatorio")) return false;

          		if( validar_obligatorio( form.email, 	"El email es obligatorio")) return false;
          		if( validar_obligatorio( form.margen, 	"El margen mínimo es obligatorio")) return false;	
          		if( validar_obligatorio( form.dscto, 	"El Descuento Máximo es obligatorio")) return false;	
          		if (validar_numero(form.margen, "El margen mínimo es un campo numerico")) return false;	
				if (validar_numero(form.dscto, "El Descuento Máximo es un campo numerico")) return false;	
          		if(form.email.value !=""){
          			if( validar_email( form.email, "La dirección de email es incorrecta") ) return false;
          		}
          		if(!(validaFono(document.getElementById("fon_cod_1").value,document.getElementById("fon_num_1").value,document.getElementById("fon_num_1"))))return false;
				if(!(validaFono(document.getElementById("fon_cod_2").value,document.getElementById("fon_num_2").value,document.getElementById("fon_num_2"))))return false;
				if (form.fon_num_3.value!=""){
					if(!(validaFono(document.getElementById("fon_cod_3").value,document.getElementById("fon_num_3").value,document.getElementById("fon_num_3"))))return false;
          		}
				//validar rut
				var dv = getDV(form.rut.value);
				//alert("getDV:"+dv)
				if( dv.toUpperCase() != form.dv.value.toUpperCase()) {
					alert("El Rut ingresado no es válido");
					form.rut.focus();
					return false;
				}
				
				if (form.sup_ve.value == 0){
					if (parseFloat(form.margen.value) < parseFloat(form.margen_inf.value) ||
					    parseFloat(form.margen.value) > parseFloat(form.margen_sup.value) ){
						alert("El margen mínimo esta fuera de rango.");
						return false;
					}
					if (parseFloat(form.dscto.value) < parseFloat(form.descuento_inf.value) ||
					    parseFloat(form.dscto.value) > parseFloat(form.descuento_sup.value) ){
						alert("El descuento máximo esta fuera de rango.");
						return false;
					}
				}	

				if (parseFloat(form.dscto.value) > 100 || parseFloat(form.margen.value) > 100
				   ||parseFloat(form.dscto.value) < 0 || parseFloat(form.margen.value) < 0){
					alert("El porcentaje debe ser entre 0-100%");
					return false;
				}
				return true;
			}
          	function agregar(form){
				form.submit();
			}
			function agregarLoc(form){
				form.submit();
			}
		</script>
           <div align="center"><font color=red>{msje}</font>
             <br><br></div>
          
          <script src="validacion.js"></script>  
          <fieldset>
          <legend><p><strong>Datos de la Empresa</strong></p></legend>
            <table width="92%" align="center" border="0">
              <tr>
                <td>					  
				  
				  <form name="frmEmpGuardar" method="post" action="AddEmpresa" onsubmit="return guardar(this);">
				  <input name=url type=hidden value="ViewWizardEmpSucursales2">
				  <input name="sup_ve" type=hidden value="{sup_ve}">
				  <input name="margen_inf" type=hidden value="{margen_inf}">
				  <input name="margen_sup" type=hidden value="{margen_sup}">
				  <input name="descuento_inf" type=hidden value="{descuento_inf}">
				  <input name="descuento_sup" type=hidden value="{descuento_sup}">	
				  <input name="UrlError" type=hidden value="ViewWizardEmpEmpresas1">				  			          				          				          				          

				  <table width="100%"  border="0" align="center" cellpadding="0" cellspacing="2">
					<tr>
					  <td width="25%">RUT</td>
					  <td width="75%"><input name="rut" type="text" value="{rut}" size="9" maxlength="9">-<input name="dv" type="text" value="{dv}" size="1" maxlength="1"></td>
					</tr>
					<tr>
					  <td>Razon Social</td>
					  <td><input name="raz_social" type="text" value="{raz_social}" size="50" maxlength="50"></td>
					</tr>
					<tr>
					  <td>Nombre</td>
					  <td><input name="nombre" type="text" value="{nombre}" size="50" maxlength="50"></td>
					</tr>
					<tr>
					  <td>Rubro</td>
					  <td><input name="rubro" type="text" value="{rubro}" size="50" maxlength="50"></td>
					</tr>
					<tr>
					  <td>Descripcion</td>
					  <td><input name="descrip" type="text" value="{descr}" size="80" maxlength="100"></td>
					</tr>
					<tr>
					  <td>Estado<br></td>
					  <td><select name="sel_est">
						<!-- BEGIN DYNAMIC: ESTADOS -->	
						  <option value="{id_estado}" >{nom_estado}</option>
						<!-- END DYNAMIC: ESTADOS -->
						</select></td>
					</tr>
					<tr>
					 <td>Margen de Utilidad<br>mayor que:</td>
					  <td><input name="margen" type="text" value="{margen}" size="5" maxlength="5"> %  {rango_margen}</td>
					</tr>
					<tr>
					 <td>Descuento M&aacute;ximo </td>
					  <td><input name="dscto" type="text" value="{dscto}" size="5" maxlength="5"> %   {rango_descuento}</td>
					</tr>
					<tr>
					  <td>Fecha</td>
					  <td>{fecha}</td>
					</tr>				            
					<!-- tr>
					  <td>Tamaño</td>
					  <td><input name="tamano" type="text" value="" size="50" maxlength="50"></td>
					</tr-->
					<!--tr>
					  <td>Cantidad de Empleados</td>
					  <td><input name="cant_emp" type="text" value="" size="12" maxlength="12"></td>
					</tr-->
					<tr>
					<td>Cantidad de Empleados</td>
					  <td>
					<SELECT NAME="cant_emp" >
					<option value="1" selected >Menos de 5 empleados</option>
					<option value="2" {sel_2} >M&aacute;s de 5 y menos de 10 empleados</option>
					<option value="3" {sel_3}>M&aacute;s de 10 empleados</option>
					</SELECT> 
					</td>
					</tr>
					</table>

					<br><strong>Datos del Contacto</strong>
					<table width="100%"  border="0" align="center" cellpadding="0" cellspacing="2">
					<tr>
					  <td width="25%">Nombre de Contacto</td>
					  <td width="75%"><input name="nom_cont" type="text" value="{nom_cont}" size="50" maxlength="50"></td>
					</tr>
					<tr>
					  <td>Cargo de Contacto</td>
					  <td><input name="cargo" type="text" value="{cargo}" size="50" maxlength="50"></td>
					</tr>
					<tr>
					  <td>Telefono 1 de Contacto*</td>
					  <td>
					   <select name="fon_cod_1" class="campos" id="fon_cod_1" style="width:50px"></select>
				              <input name="fon_num_1" type="text"  class="campo" id="fon_num_1" size="8" maxlength="8" style="margin-top:5px;" />
				              <div class="cont_acepto_info" id="fon_num_1_info"></div>
				              <div class="cont_alerta_error" id="fon_num_1_error"></div>
				              
					  <select style="display:none" name="cod_tel_1" class="campo" id="fon_cod_1">
									<option value='02' selected>02</option>
									<option value='32' >32</option>
									<option value='33' >33</option>
									<option value='34' >34</option>
									<option value='35' >35</option>
									<option value='41' >41</option>
									<option value='42' >42</option>
									<option value='43' >43</option>
									<option value='45' >45</option>
									<option value='51' >51</option>
									<option value='52' >52</option>
									<option value='53' >53</option>
									<option value='55' >55</option>
									<option value='57' >57</option>
									<option value='58' >58</option>
									<option value='61' >61</option>
									<option value='63' >63</option>
									<option value='64' >64</option>
									<option value='65' >65</option>
									<option value='67' >67</option>
									<option value='71' >71</option>
									<option value='72' >72</option>
									<option value='73' >73</option>
									<option value='75' >75</option>
								</select>
					  <input name="telf_1" type="hidden" value="{telf_1}" size="20" maxlength="7"></td>
					</tr>
					<tr>
					  <td>Telefono 2 de Contacto*</td>
					  <td>
					  <select name="fon_cod_2" class="campos" id="fon_cod_2" style="width:50px"></select>
				              <input name="fon_num_2" type="text"  class="campo" id="fon_num_2" size="8" maxlength="8" style="margin-top:5px;" />
				              <div class="cont_acepto_info" id="fon_num_2_info"></div>
				              <div class="cont_alerta_error" id="fon_num_2_error"></div>
					  <select style="display:none" name="cod_tel_2" class="campo" id="cod_tel_2">
						<option value="7" >7</option>
						<option value="8" >8</option>
						<option value="9" selected>9</option>
					  </select>
					  <input name="telf_2" type="hidden" value="{telf_2}" size="20" maxlength="7"></td>
					</tr>
					<tr>
					  <td>Telefono 3 de Contacto</td>
					  <td>
					  <select name="fon_cod_3" class="campos" id="fon_cod_3" style="width:50px"></select>
				              <input name="fon_num_3" type="text"  class="campo" id="fon_num_3" size="8" maxlength="8" style="margin-top:5px;" />
				              <div class="cont_acepto_info" id="fon_num_3_info"></div>
				              <div class="cont_alerta_error" id="fon_num_3_error"></div>
					  <select style="display:none" name="cod_tel_3" class="campo" id="fon_cod_3">
						<option value='02' selected>02</option>
						<option value='32' >32</option>
						<option value='33' >33</option>
						<option value='34' >34</option>
						<option value='35' >35</option>
						<option value='41' >41</option>
						<option value='42' >42</option>
						<option value='43' >43</option>
						<option value='45' >45</option>
						<option value='51' >51</option>
						<option value='52' >52</option>
						<option value='53' >53</option>
						<option value='55' >55</option>
						<option value='57' >57</option>
						<option value='58' >58</option>
						<option value='61' >61</option>
						<option value='63' >63</option>
						<option value='64' >64</option>
						<option value='65' >65</option>
						<option value='67' >67</option>
						<option value='71' >71</option>
						<option value='72' >72</option>
						<option value='73' >73</option>
						<option value='75' >75</option>
					</select>
					  <input name="telf_3" type="hidden" value="{telf_3}" size="20" maxlength="7"></td>
					</tr>
					<tr>
					  <td>Mail de Contacto</td>
					  <td><input name="email" type="text" value="{email}" size="50" maxlength="50"></td>
					</tr>


					<tr>
					  <td><br></td>
					  <td><br></td>
					</tr>
					<tr>
					  <td>&nbsp;</td>
					  <td><input name="Button" type="submit" class="cmd" value="    Guardar y Seguir  " >
						  <input name="Button" type="button" class="cmd" value="   Cancelar    " 
						  onclick="javascript:location.href='ViewHome';">
						  </td>
					</tr>
				  </table>
				         
				 </form>      
               </td>
              </tr>
            </table>
             </fieldset>  

          <br>

		      <br>
			<script>
				document.frmEmpGuardar.dv.onkeypress 		= KeyIsRut;
				document.frmEmpGuardar.raz_social.onkeypress = KeyIsTexto;
				document.frmEmpGuardar.nombre.onkeypress 	= KeyIsTexto;
				document.frmEmpGuardar.rubro.onkeypress 	= KeyIsTexto;
				document.frmEmpGuardar.descrip.onkeypress 	= KeyIsTexto;
				document.frmEmpGuardar.nom_cont.onkeypress 	= KeyIsTexto;
				document.frmEmpGuardar.cargo.onkeypress 	= KeyNotCarExt;
				document.frmEmpGuardar.rut.onkeypress 		= KeyIsNumber;
				//document.frmEmpGuardar.cant_emp.onkeypress 	= KeyIsNumber;
				document.frmEmpGuardar.margen.onkeypress 	= KeyIsDecimal;
				document.frmEmpGuardar.dscto.onkeypress 	= KeyIsDecimal;
				document.frmEmpGuardar.telf_1.onkeypress 	= KeyIsFono;
				document.frmEmpGuardar.telf_2.onkeypress 	= KeyIsFono;
				document.frmEmpGuardar.telf_3.onkeypress 	= KeyIsFono;
				
		
			</script>
			<script type="text/javascript">
				jQuery('#fon_cod_1').append(getAllCodPhones());
				jQuery('#fon_cod_2').append(getAllCodPhones());
				jQuery('#fon_cod_3').append(getAllCodPhones());
				var codigo1 = jQuery('#cod_tel_1').val();
				var numero1 = jQuery('#telf_1').val();
				var codigo2 = jQuery('#cod_tel_2').val();
				var numero2 = jQuery('#telf_2').val();
				var codigo3 = jQuery('#cod_tel_3').val();
				var numero3 = jQuery('#telf_3').val();
				initialize('fon_cod_1', 'fon_num_1');
				initialize('fon_cod_2', 'fon_num_2');
				initialize('fon_cod_3', 'fon_num_3');
				
				onChange('fon_cod_1','fon_num_1','fon_num_1_info');
				onChange('fon_cod_2','fon_num_2','fon_num_2_info');
				onChange('fon_cod_3','fon_num_3','fon_num_3_info');
			</script>
	      <!-- InstanceEndEditable --></td>
        </tr>
      </table>
      </td>
  </tr>
  <tr>
    <td>
	<TABLE width="100%" height=19 border=0 align="center" cellpadding="0" cellspacing="0" bgcolor="#f1f0e9" style="border-top:1px solid #ABABAB; border-bottom:1px solid #ABABAB">
	  <TR>
		<TD align=center bgcolor="#67b01a" class=infoBL><div align="center">Back Office Central - Jumbo.cl</div></TD>
		</TR>
	</TABLE>

	
	</td>
  </tr>
</table>
</body>
<!-- InstanceEnd --></html>