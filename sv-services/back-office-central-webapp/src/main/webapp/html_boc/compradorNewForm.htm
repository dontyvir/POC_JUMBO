<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><!-- InstanceBegin template="/Templates/fullbody.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
<META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE">
<META HTTP-EQUIV="EXPIRES" CONTENT="Mon, 22 Jul 2002 11:12:01 GMT">
<!-- InstanceBeginEditable name="doctitle" -->
<title>Jumbo.cl Back Office Central</title>
<!-- InstanceEndEditable -->

<!-- InstanceBeginEditable name="head" --><!-- InstanceEndEditable -->

<link href="estilos.css" rel="stylesheet" type="text/css">
<!--link href="../default.css" rel="stylesheet" type="text/css"-->
<style type="text/css">
<!--
.style1 {color: #666666}
-->
</style>
</head>

<body>
<link rel="stylesheet" href="menu/menu.css">
<script language="JavaScript" src="menu/menu.js"></script>
<script language="JavaScript" src="menu/menu_tpl.js"></script>
<script language="JavaScript" src="menu/menu_items.js"></script>
<script language="JavaScript" src="popup.js"></script>
<script language="JavaScript" src="funciones.js"></script>
<script language="JavaScript" src="js/jquery-1.6.2.min.js"></script>
<script language="JavaScript" src="js/aphanumeric.js"></script>
<script language="JavaScript" src="js/codigosTelefonicos.js"></script>
<SCRIPT LANGUAGE="JavaScript">window.name='padre'</SCRIPT>		

<table width="780" height="100%" border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td height="78" valign="top">
	
	<TABLE width="100%" height=59 border=0 align="center" cellpadding="0" cellspacing="0" bgcolor="#ffffff">
	  <TR>
		<TD width=275 height="59" align=left class=user><img src="img/header2.jpg" width="275" height="60"></TD>
		<TD width=505 align=left valign="bottom" background="img/bg-1.jpg" class=user><table width="90%"  border="0" align="center" cellpadding="0" cellspacing="2">
          <tr>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td><div align="right" class="infoBL">Usuario: {hdr_nombre}&nbsp;&nbsp;| {hdr_fecha}</div></td>
          </tr>
        </table></TD>
	  </TR>
	</TABLE>
	<TABLE width="100%" height=19 border=0 align="center" cellpadding="0" cellspacing="0" bgcolor="#f1f0e9" style="border-top:1px solid #ABABAB; border-bottom:1px solid #ABABAB">
	  <TR>
		<TD align=left bgcolor="#FFFFFF" class=user></TD>
		</TR>
	</TABLE>

	
	</td>
  </tr>
  <tr height="400">
    <td valign="top" bgcolor="#FFFFFF">
      <table border=0 width="100%" class='ContentTitle'>
        <tr>
          <td width="53%" height="20" class='HeaderTitle'><!-- InstanceBeginEditable name="Titulo" -->
				  Administraci&oacute;n de Compradores <!-- InstanceEndEditable --></td>
          <td width="47%" class='HeaderTitle'><!-- InstanceBeginEditable name="Botonera" -->
            <div align="right"></div>
          <!-- InstanceEndEditable --></td>
        </tr>
      </table>
	  <br>
      <table width="100%"  border="0" cellspacing="2" cellpadding="2">
        <tr valign="top">
          <td width="71%"><!-- InstanceBeginEditable name="Izquierda" -->
          <script language="JavaScript" src="funciones.js"></script>
          <script language="JavaScript">
          function validaFono(cod,num,campo){
          		var codigo1 = cod;
				var numero1 = num;
				var tipofono;
				if (codigo1==9){//si es celular
					numero = numero1.slice(- 8);
					codigo = numero1.substr(0,1);
					if (codigo<5){
						alert("El primer numero de un celular debe ser entre 5 y 9.");
						campo.value="";
						campo.focus();
						return false;
					}	
					tipofono="celular";
				}else if (codigo1==2){//si es telefono santiago
					numero = numero1.slice (- 8);
					codigo = codigo1;
					tipofono="santiago";
				}else{//si es telefono regiones
					numero = numero1;
					codigo = codigo1;
					tipofono="region";
				}
          		if ((Trim(numero)).length <7 &&(tipofono=="region")){
					alert("Debe ingresar el número de fono correctamente.");
					campo.focus();
					return false;
				}else if((Trim(numero1)).length <8 &&(tipofono!="region")){
					alert("Debe ingresar el número de fono correctamente.");
					campo.focus();
					return false;
				}
				return true;
          	}
            function guardar(form){
				if( validar_obligatorio( form.rut, "El Rut es obligatorio" ) ) return false;          		
				if( validar_obligatorio( form.dv, "El Digito Verificador es obligatorio" ) ) return false;          		
          		if( validar_obligatorio( form.nombre, "El Nombre es obligatorio" ) ) return false;          		
          		if( validar_obligatorio( form.paterno, "El Apellido Paterno es obligatorio" ) ) return false;
          		if( validar_obligatorio( form.materno, "El Apellido Materno es obligatorio" ) ) return false;

          		if( validar_obligatorio( form.email, 	"El email es obligatorio")) return false;
          		if( validar_obligatorio( form.clave, 	"La clave es obligatoria")) return false;
          		if( validar_obligatorio( form.repite_clave, 	"La Repetición de Clave es obligatoria")) return false;
          		if(!(validaFono(form.fon_cod_1.value,form.fon_num_1.value,form.fon_num_1))) 
          			return false;
          		if(!(validaFono(form.fon_cod_2.value,form.fon_num_2.value,form.fon_num_2))) 
          			return false;
				if (form.fon_cod_1.value==""){
          			alert ("Debe ingresar el codigo telefonico del telefono 1")
          			form.fon_cod_1.focus();
          			return false;
          		}
          		if (form.fon_cod_2.value==""){
          			alert ("Debe ingresar el codigo telefonico del telefono 2")
          			form.fon_cod_2.focus();
          			return false;
          		}
          		if (!(form.fon_num_3.value=="")){
	          		if (form.fon_cod_3.value==""){
	          			alert ("Debe ingresar el codigo telefonico del telefono 3")
	          			form.fon_cod_3.focus();
	          			return false;
	          		}
	          		if(!(validaFono(form.fon_cod_3.value,form.fon_num_3.value,form.fon_num_3))) 
          				return false;		
          		}
          		if(form.emp_id.value == ""){
          			alert("Debe ingresar empresa.");
          			return false;
          		}
          		if (form.sel_emp_suc.value == ""){
          			alert("Debe ingresar sucursal.");
          			return false;
          		}
          		if(form.email.value !=""){
          			if( validar_email( form.email, "La dirección de email es incorrecta") ) return false;
          		}
          		if (form.clave.value != form.repite_clave.value){
          			alert("La repeticion de clave no coincide.")
          			return false;
          		}
	
				//validar rut
				var dv = getDV(form.rut.value);
			
				if( dv.toUpperCase() != form.dv.value.toUpperCase()) {
					alert("El Rut ingresado no es válido");
					form.rut.focus();
					return false;
				}
				
				return true;
			}
			
			
					function abre_popup_emp1(){
					valor="";
					if ((valor = popUpWindowModalscroll('ViewEmpresasPopUp', 100, 100, 600, 400))> '0') {
						if (valor != ""){
							id = valor.split("|");
							document.frmCompGuardar.emp_id.value = id[0];
							document.frmCompGuardar.empresa.value = id[1];
							document.frmCompGuardar.sel_emp_suc.value = "";
							document.frmCompGuardar.sucursal.value = "";
							
						}
					}
				}	
				
				
				function abre_popup_suc(empresa_id){
					if (empresa_id == null || empresa_id == ""){
						alert("Primero debe seleccionar una empresa.");
					}else{
						valor="";
						if ((valor = popUpWindowModalscroll('ViewSucursalesEmpPopUp?emp_id='+empresa_id, 100, 100, 600, 400))> '0') {
							if (valor != ""){
								id = valor.split("|");
								document.frmCompGuardar.sel_emp_suc.value = id[0];
								document.frmCompGuardar.sucursal.value = id[1];
							}
						}
					}
				}
			
		</script>
          
          
          <script src="validacion.js"></script>
            
            <link id="luna-tab-style-sheet" type="text/css" rel="stylesheet" href="js/tabs/tabpane.css" />
            <script type="text/javascript" src="js/tabs/tabpane.js"></script>
            <table width="92%" align="center" border="0">
              <tr>
                <td><div class="tab-page" id="modules-cpanel">
                    <script type="text/javascript">
				   		var tabPane1 = new WebFXTabPane( document.getElementById( "modules-cpanel" ), 0 )
				    </script>
                
                    <div class="tab-page" id="modulo1">
                      <h2 class="tab">Ficha</h2>
                      <div align="left">
					  
                          <p><strong>Datos de la Comprador</strong></p>
				          <form name="frmCompGuardar" method="post" action="AddComprador" onsubmit="return guardar(this);">
				          <input name=url type=hidden value="ViewCompradorForm">

                          <table width="100%"  border="0" align="center" cellpadding="0" cellspacing="2">
				            <tr>
				              <td width="25%">RUT</td>
				              <td width="75%"><input name="rut" type="text" value="" size="9" maxlength="9">-<input name="dv" type="text" value="" size="1" maxlength="1"></td>
				            </tr>
				            <tr>
				              <td>Nombre</td>
				              <td><input name="nombre" type="text" value="" size="50" maxlength="50"></td>
				            </tr>
				            <tr>
				              <td>Apellido Paterno</td>
				              <td><input name="paterno" type="text" value="" size="50" maxlength="50"></td>
				            </tr>
				            <tr>
				              <td>Apellido Materno</td>
				              <td><input name="materno" type="text" value="" size="50" maxlength="50"></td>
				            </tr>
				            <tr>
				              <td>Empresa</td>
				              <td><input name="emp_id" type="hidden" value=""  >
							  <input name="empresa" type="text"  value="" size="40"  readOnly onclick="javascript:abre_popup_emp1();" >
                                <a href="javascript:abre_popup_emp1();"><img src="img/magnify.jpg" width="16" height="16" border="0" alt="Seleccionar Empresa"></a> 
					            </td>
				            </tr>
				            <tr>
				              <td>Sucursal</td>
				              <td><input name="sel_emp_suc" type="hidden" value=""  >
							  <input name="sucursal" type="text"  value="" size="40" readOnly onclick="javascript:abre_popup_suc(document.frmCompGuardar.emp_id.value);">
                                <a href="javascript:abre_popup_suc(document.frmCompGuardar.emp_id.value);"><img src="img/magnify.jpg" width="16" height="16" border="0" alt="Seleccionar Sucursal"></a> 
                                </td>
				            </tr>				            
<!--				            <tr>
				              <td>Tipo</td>
				              <td><select name="sel_tip">
								<option value="A" selected>Administrador</option>
								<option value="C" >Comprador</option>
							  </select></td>
				            </tr>
	-->			            <tr>
				              <td>Genero</td>
				              <td><select name="sel_gen">
								<option value="M" selected>Masculino</option>
								<option value="F" >Femenino</option>
							  </select></td>
				            </tr>
				            <tr>
				              <td>Telefono 1</td>
				              <td><select name="fon_cod_1" class="campos" id="fon_cod_1" style="width:50px"></select>
				              <input name="fon_num_1" type="text"  class="campo" id="fon_num_1" size="8" maxlength="8" style="margin-top:5px;" />
				              <div class="cont_acepto_info" id="fon_num_1_info"></div>
				              <div class="cont_alerta_error" id="fon_num_1_error"></div></td>
				            </tr>
				            <tr>
				              <td>Telefono 2</td>
				              <td><select name="fon_cod_2" class="campos" id="fon_cod_2" style="width:50px"></select>
				              <input name="fon_num_2" type="text"  class="campo" id="fon_num_2" size="8" maxlength="8" style="margin-top:5px;" />
				              <div class="cont_acepto_info" id="fon_num_2_info"></div>
				              <div class="cont_alerta_error" id="fon_num_2_error"></div></td>
				            </tr>
				            <tr>
				              <td>Telefono 3</td>
				              <td><select name="fon_cod_3" class="campos" id="fon_cod_3" style="width:50px"></select>
				              <input name="fon_num_3" type="text"  class="campo" id="fon_num_3" size="8" maxlength="8" style="margin-top:5px;" />
				              <div class="cont_acepto_info" id="fon_num_3_info"></div>
				              <div class="cont_alerta_error" id="fon_num_3_error"></div></td>
				            </tr>
				            <tr>
				              <td>Mail de Contacto</td>
				              <td><input name="email" type="text" value="" size="50" maxlength="100"></td>
				            </tr>
				            <tr>
				              <td>Estado</td>
				              <td><select name="sel_est">
				                <!-- BEGIN DYNAMIC: ESTADOS -->
								<option value="{id_estado}" {sel_est} >{nom_estado}</option>
								<!-- END DYNAMIC: ESTADOS -->
				              </select></td>
				            </tr>
				            <tr> 
				              <td><br></td>
				              <td><br></td>
				            </tr>
				            <tr>
				              <td>Fecha de creación</td>
				              <td>{fecha}</td>
				            </tr>
				            <tr> 
				              <td>Clave</td>
				              <td><input name="clave" type="password" ></td>
				            </tr>				  
				            <tr> 
				              <td>Repita Clave</td>
				              <td><input name="repite_clave" type="password" ></td>
				            </tr>
				            <tr> 
				              <td>Pregunta Secreta</td>
				              <td><input name="preg_secreta" type="text" value="" size="50" maxlenght="100"></td>
				            </tr>				  
				            <tr> 
				              <td>Respuesta Secreta</td>
				              <td><input name="resp_secreta" type="text" value="" size="50" maxlenght="100"></td>
				            </tr>					            
                            <tr>
                              <td>&nbsp;</td>
                              <td><input name="Button" type="submit" class="cmd" value="    Guardar    " >
                                  <input name="Button" type="button" class="cmd" value="    Cancelar     " 
    	                          onclick="javascript:location.href='ViewMonComprador'">
		                          </td>
                            </tr>
                          </table>
	                     </form>      
                          <br>
                        <br>
                      </div>
                    </div>
					

				   </div></td>
              </tr>
            </table>
          </form>
          <br>

		      <br>
			<script>
			jQuery("#fon_cod_1").append(getAllCodPhones());
			jQuery("#fon_cod_2").append(getAllCodPhones());
			jQuery("#fon_cod_3").append(getAllCodPhones());
					initialize("fon_cod_1","fon_num_1");
		initialize("fon_cod_2","fon_num_2");
		initialize("fon_cod_3","fon_num_3");
		
		onChange("fon_cod_1","fon_num_1","fon_num_1_info");
        onChange("fon_cod_2","fon_num_2","fon_num_2_info"); 
        onChange("fon_cod_3","fon_num_3","fon_num_3_info"); 
				document.frmCompGuardar.dv.onkeypress 		= KeyIsRut;
				document.frmCompGuardar.rut.onkeypress 		= KeyIsNumber;
				document.frmCompGuardar.nombre.onkeypress 	= KeyIsTexto;
				document.frmCompGuardar.paterno.onkeypress 	= KeyIsTexto;
				document.frmCompGuardar.materno.onkeypress 	= KeyIsTexto;
			</script>
	      <!-- InstanceEndEditable --></td>
        </tr>
      </table>
      </td>
  </tr>
  <tr>
    <td>
	<TABLE width="100%" height=19 border=0 align="center" cellpadding="0" cellspacing="0" bgcolor="#f1f0e9" style="border-top:1px solid #ABABAB; border-bottom:1px solid #ABABAB">
	  <TR>
		<TD align=center bgcolor="#67b01a" class=infoBL><div align="center">Back Office Central - Jumbo.cl</div></TD>
		</TR>
	</TABLE>

	
	</td>
  </tr>
</table>
</body>
<!-- InstanceEnd --></html>