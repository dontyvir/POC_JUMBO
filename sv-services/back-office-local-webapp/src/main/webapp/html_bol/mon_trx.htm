<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><!-- InstanceBegin template="/Templates/fullbody.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
<META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE">
<META HTTP-EQUIV="EXPIRES" CONTENT="Mon, 22 Jul 2002 11:12:01 GMT">
<!-- InstanceBeginEditable name="doctitle" -->
<title>Jumbo.cl Back Office Local</title>
<!-- InstanceEndEditable -->

<!-- InstanceBeginEditable name="head" -->
<SCRIPT LANGUAGE="JavaScript" SRC="CalendarPopup.js"></SCRIPT>
<SCRIPT LANGUAGE="JavaScript" SRC="funciones.js"></SCRIPT>
<SCRIPT LANGUAGE="JavaScript">document.write(getCalendarStyles());</SCRIPT>
<!-- InstanceEndEditable -->

<link href="estilos.css" rel="stylesheet" type="text/css">
<!--link href="../Prototipo/default.css" rel="stylesheet" type="text/css"-->
<style type="text/css">
<!--
.style1 {color: #666666}
-->
</style>
</head>

<body>
<link rel="stylesheet" href="menu/menu.css">
<script language="JavaScript" src="menu/menu.js"></script>
<script language="JavaScript" src="menu/menu_tpl.js"></script>
<script language="JavaScript" src="menu/menu_items.js"></script>
<script language="JavaScript" src="popup.js"></script>

<SCRIPT LANGUAGE="JavaScript">window.name='winpedido'</SCRIPT>
 
 
<table width="780" height="100%" border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td height="78" valign="top">
	
	<TABLE width="100%" height=59 border=0 align="center" cellpadding="0" cellspacing="0" bgcolor="#ffffff">
	  <TR>
		<TD width=275 height="59" align=left class=user><img src="img/header2.jpg" width="275" height="60"></TD>
		<TD width=505 align=left valign="bottom" background="img/bg-1.jpg" class=user><table width="90%"  border="0" align="center" cellpadding="0" cellspacing="2">
          <tr>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td><div align="right" class="infoBL">Usuario: {hdr_nombre} | Local: {hdr_local} | {hdr_fecha} </div></td>
          </tr>
        </table></TD>
	  </TR>
	</TABLE>
	<TABLE width="100%" height=19 border=0 align="center" cellpadding="0" cellspacing="0" bgcolor="#f1f0e9" style="border-top:1px solid #ABABAB; border-bottom:1px solid #ABABAB">
	  <TR>
		<TD align=left bgcolor="#FFFFFF" class=user></TD>
		</TR>
	</TABLE>

	
	</td>
  </tr>
  <tr height="400">
    <td valign="top" bgcolor="#FFFFFF">
      <table border=0 width="100%" class='ContentTitle'>
        <tr>
          <td width="53%" height="20" class='HeaderTitle'><!-- InstanceBeginEditable name="Titulo" -->
				Monitor de Transacciones de Pagos<!-- InstanceEndEditable --></td>
          <td width="47%" class='HeaderTitle'><!-- InstanceBeginEditable name="Botonera" --><!-- InstanceEndEditable --></td>
        </tr>
      </table>
	  <br>
      <table width="100%"  border="0" cellspacing="2" cellpadding="2">
        <tr valign="top">
          <td width="71%"><!-- InstanceBeginEditable name="Izquierda" -->

	<script src="validacion.js"></script>
	<script language="JavaScript">
	  	function submitForm1(flag){
	  		
	  		df = document.form1;
	  		df.id_pedido.value = document.getElementById('txt_id_pedido').value;
			// reglas de validacion
			//df.id_pedido.obligatorio=true;

			/*
			if (df.id_pedido.value == ""){
				alert("Debe ingresar un Nº de Pedido");			
				return false;
			}*/
			if (validar_solonumero(document.forma3.id_ped, "Nº Pedido es un campo numerico")) return false;
			df.id_pedido.numerico=true;
			df.id_pedido.label='Nº Pedido';
			
			if(verify(flag,df)) df.submit();

	  	}
	  	
	  	function submitForm2(flag){
	  		
	  		df = document.form1;
	  		buscar = document.forma3;
	  					
			if ((buscar.rad_fec[0].checked==true) || (buscar.rad_fec[1].checked==true)){
				if (   ((buscar.fec_ini.value=="") && (buscar.fec_fin.value==""))
					|| ((buscar.fec_ini.value=="") && (buscar.fec_fin.value!=""))
					|| ((buscar.fec_ini.value!="") && (buscar.fec_fin.value==""))   ){
					alert("Debe ingresar la fecha de inicio y la fecha de fin");			
					return false;
				}
				
				var fecha1 = buscar.fec_ini.value.substring(6,10)+
							buscar.fec_ini.value.substring(3,5)+
							buscar.fec_ini.value.substring(0,2);
				var fecha2 = buscar.fec_fin.value.substring(6,10)+
							buscar.fec_fin.value.substring(3,5)+
							buscar.fec_fin.value.substring(0,2);
				if (fecha1 > fecha2){
								alert("La fecha de inicio es mayor a la fecha de fin, revise por favor");
								return false;
				}	 
				if (buscar.rad_fec[0].checked==true){
				df.tipo_fecha.value = buscar.rad_fec[0].value;
				}
				if (buscar.rad_fec[1].checked==true){
				df.tipo_fecha.value = buscar.rad_fec[1].value;
				}					
				df.fecha_ini.value = buscar.fec_ini.value;
				df.fecha_fin.value = buscar.fec_fin.value;
				
			}
			
			if ((buscar.rad_fec[0].checked==false) && (buscar.rad_fec[1].checked==false)){
				if ((buscar.fec_ini.value!="") || (buscar.fec_fin.value!="")){
					alert("Debe marcar el tipo de fecha (Picking o Despacho)");			
					return false;
				}
			}
			
			df.id_estado.value = document.getElementById('sel_estados').value;
			
			//alert("sel_tipo_doc: " + document.getElementById('sel_tipo_doc').value);
			//alert("sel_origen: " + document.getElementById('sel_origen').value);
			
		    df.tipo_doc.value = document.getElementById('sel_tipo_doc').value;
		    df.origen.value = document.getElementById('sel_origen').value;
		    
			if(verify(flag,df)) df.submit();
	  	}
	  </script>
	   <!-- Formulario buscar por id_pedido -->
		<form name="form1" method="get" action="ViewMonitorTrxMp">
			<input type="hidden" name="id_pedido"  value="">
			<input type="hidden" name="id_estado"  value="">
			<input type="hidden" name="tipo_fecha" value="">
			<input type="hidden" name="fecha_ini"  value="">
			<input type="hidden" name="fecha_fin"  value="">
			<input type="hidden" name="tipo_doc"   value="">
			<input type="hidden" name="origen"     value="">
		</form>
		<!-- Fin formularios -->
          
				<table width="85%" border="0" align="center" cellpadding="0"
					cellspacing="0">
					<tr>
						<td>

						<SCRIPT LANGUAGE="JavaScript" ID="js17">
							var ayer = new Date(30,4,2006,12,0,0,0);
							var cal1 = new CalendarPopup("testdiv1");
							cal1.offsetX = -140;
							cal1.offsetY = -50;
						</SCRIPT>
						<form name="forma3">
						<fieldset><legend>Buscador de Transacciones de Pagos</legend>
						<table width="100%" border="0" cellspacing="2" cellpadding="0">
							<tr>
								<td width="25%">N&deg; Pedido</td>
								<td width="20%">&nbsp;Tipo Documento</td>
								<td width="45%">&nbsp;Origen</td>
								<td width="10%">&nbsp;</td>
							</tr>
							<!-- JScript Calendario -->

							
							<tr>
								<td><input name = "id_ped" type="text" id="txt_id_pedido" value="{id_pedido}" maxlength = "10"  size="10" >
									<input type="button" class="cmd" value="Buscar"
										onClick="submitForm1(0);">
								</td>
								<td>
								    <select name="sel_tipo_doc" id="sel_tipo_doc">
								       <option value="" selected>Todos</option>
								       <!-- BEGIN DYNAMIC: listado_tipo_doc -->
								       <!-- option value="B">Boleta</option-->
								       <!-- option value="F">Factura</option-->
								       <option value="{valor_td}" {estado_td}>{nombre_td}</option>
								       <!-- END DYNAMIC: listado_tipo_doc -->
								    </select>
								</td>
								<td>
								    <select name="sel_origen" id="sel_origen">
								       <option value="" selected>Todos</option>
								       <!-- BEGIN DYNAMIC: listado_origen -->
								       <!--option value="W">Jumbo.cl</option-->
								       <!--option value="V">Venta Empresa</option-->
								       <option value="{valor_o}" {estado_o}>{nombre_o}</option>
								       <!-- END DYNAMIC: listado_origen -->
								    </select>
								</td>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td >Estados</td>
								<td colspan="2">Fecha de:
								<input name="rad_fec" type="radio" value="P" {check_fec_pik} >
								  Picking
								<input name="rad_fec" type="radio" value="D" {check_fec_desp} >
								  Despacho
								</td>
								<td >&nbsp;</td>
							</tr>
							<tr>
								<td >
								<select name="sel_estados">
									<option value="" selected>TODOS</option>
									<!-- BEGIN DYNAMIC: listado_estados_trxmp -->
									<option value="{id_estado}" {sel_estado} >{estado_nom}</option>
									<!-- END DYNAMIC: listado_estados_trxmp -->
								</select>
								</td>
								<td colspan="2">
									Entre <input name="fec_ini" type="text" size="12" maxlength="20" value="{fec_ini}" readonly
									onClick="cal1.select(document.forma3.fec_ini,'anchor1','dd-MM-yyyy'); return false;" title="Fecha de Inicio">
									<a href="#"
									 onClick="cal1.select(document.forma3.fec_ini,'anchor1','dd-MM-yyyy'); return false;"
									 name="anchor1" id="anchor1"> <img src="img/cal.gif" width="16"
									 height="16" border="0" alt="Debe ingresar Fecha de Inicio y Fecha de Fin" > </a>
									y <input name="fec_fin" type="text" size="12" maxlength="20" value="{fec_fin}" readonly
									onClick="cal1.select(document.forma3.fec_fin,'anchor2','dd-MM-yyyy'); return false;" title="Fecha de Fin">
									<a href="#"
									 onClick="cal1.select(document.forma3.fec_fin,'anchor2','dd-MM-yyyy'); return false;"
									 name="anchor2" id="anchor2"> <img src="img/cal.gif" width="16"
									 height="16" border="0" alt="Debe ingresar Fecha de Inicio y Fecha de Fin" > </a>								
								</td>
								<td ><input type="button" class="cmd" value="Buscar" onClick="submitForm2(0);"></td>
							</tr>										
						</table>
						</fieldset>
						</form>
						</td>
					</tr>
				</table>
				<DIV ID="testdiv1"
					STYLE="position:absolute;visibility:hidden;background-color:white;layer-background-color:white;"></DIV>
				<br>
				<table width="750" border="1" align="center" cellpadding="2" cellspacing="0" class="tabla21">
				<tr>
					<th width="50">Nº Trx</th>
					<th width="70">Monto</th>
					<th width="30">Nº Prods.</th>
					<th width="50">Estado</th>
					<th width="70">Tipo Doc.</th>
					<th width="50">Nº Doc.</th>
					<th width="50">Nº Caja</th>
					<th width="50">Monto POS</th>
					<th width="50">Fecha POS</th>
					<th width="50">Hora POS</th>
					<th width="50">FP</th>
					<th width="65">Fecha<br>Picking</th>
					<th width="65">Fecha<br>Despacho</th>
					<th width="65">Acciones</th>
				</tr>
				<!-- BEGIN DYNAMIC: listado_trxmp -->
				<tr valign="top" bgcolor="{color_fila}">
					<td>
					<div align="center">{trxmp_nro}</div>
					</td>
					<td>
					<div align="center">{trxmp_monto}</div>
					</td>
					<td>
					<div align="center">{trxmp_qtyprods}</div>
					</td>
					<td>
					<div align="center">{trxmp_estado}</div>
					</td>
					<td>
					<div align="center">{trxmp_tipo_doc}</div>
					</td>
					<td>
					<div align="center">{trxmp_num_doc}</div>
					</td>
					<td>
					<div align="center">{trxmp_num_caja}</div>
					</td>
					<td>
					<div align="center">{trxmp_pos_monto_fp}</div>
					</td>
					<td>
					<div align="center">{trxmp_pos_fecha}</div>
					</td>
					<td>
					<div align="center">{trxmp_pos_hora}</div>
					</td>
					<td>
					<div align="center">{trxmp_pos_fp}</div>
					</td>
					<td>{fecha_picking}</td>
					<td>{fecha_despacho}</td>
					<td>
					<div align="left">
					  <!-- a title="imprimir" href="javascript:popUpWindow('ViewPrint?url='+escape('ViewActListFacturas?id_pedido={id_pedido}'), 200, 250, 350, 280)"-->
					  {trxmp_img_factura}
					  <!-- /a-->
					  <a title="ver" href="javascript:popUpWindow('ViewPrint?url='+escape('ViewTrxMpDetalle?id_trx_mp={trxmp_nro}&id_pedido={id_pedido}&edit={edit}'), 100, 100, 700, 500)">
					  <img src="img/editicon.gif" border="0"></a>
					  <a title="imprimir" href="javascript:popUpWindow('ViewPrint?url='+escape('ViewTrxMp?id_trx_mp={trxmp_nro}&id_pedido={id_pedido}'), 100, 100, 700, 500)">
					  <img src="img/ico_print.gif" width="16" height="16" border="0">
					  </a>
					  </div>
					</td>
				</tr>
				<!-- END DYNAMIC: listado_trxmp -->
			</table>
				<table width="727" border="0" align="center" cellpadding="2"
					cellspacing="2">
					<tr>
						<td><div align="center"><font color="red"><b>{mensaje}</b></font></div></td>
						<form name="pagform" method="get" action="ViewMonitorTrxMp">
						<input type="hidden" name="id_estado" value="{id_estado}">
						<input type="hidden" name="tipo_fecha" value="{tipo_fecha}">
						<input type="hidden" name="fecha_ini" value="{fec_ini}">
						<input type="hidden" name="fecha_fin" value="{fec_fin}">		
                        <input type="hidden" name="tipo_doc" value="{sel_tipo_doc}">
                        <input type="hidden" name="origen"   value="{sel_origen}">
						
						<td width="190">
						<div align="right">
						<a href="ViewMonitorTrxMp?pag={anterior}&fecha_ini={fec_ini}&fecha_fin={fec_fin}&id_estado={id_estado}&tipo_fecha={tipo_fecha}&tipo_doc={sel_tipo_doc}&origen={sel_origen}">{anterior_label}&nbsp;</a>
						P&aacute;g <select name="pag" onChange="submit(this.form);" {dis1} >
							<!--  BEGIN DYNAMIC: paginador -->
							<option value="{pag}"{sel}>{pag}</option>
						    <!--  END DYNAMIC: paginador -->
						</select>
						<a href="ViewMonitorTrxMp?pag={siguiente}&fecha_ini={fec_ini}&fecha_fin={fec_fin}&id_estado={id_estado}&tipo_fecha={tipo_fecha}&tipo_doc={sel_tipo_doc}&origen={sel_origen}">{siguiente_label}&nbsp;</a>						
						</div>
						</td>
						</form>
					</tr>
				</table>
				<p>&nbsp;</p>
				<p>&nbsp;</p>
				<script>
					document.forma3.id_ped.numerico=true;
					document.forma3.id_ped.label = 'Id pedido';	
					document.forma3.id_ped.onkeypress = KeyIsNumber;
				</script>
				<!-- InstanceEndEditable --></td>
        </tr>
      </table>
      </td>
  </tr>
  <tr>
    <td>
	<TABLE width="100%" height=19 border=0 align="center" cellpadding="0" cellspacing="0" bgcolor="#f1f0e9" style="border-top:1px solid #ABABAB; border-bottom:1px solid #ABABAB">
	  <TR>
		<TD align=center bgcolor="#67b01a" class=infoBL><div align="center">Back Office Local - Jumbo.cl</div></TD>
		</TR>
	</TABLE>
	</td>
  </tr>
</table>
</body>
<!-- InstanceEnd --></html>
