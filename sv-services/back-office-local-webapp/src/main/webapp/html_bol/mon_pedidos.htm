<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><!-- InstanceBegin template="/Templates/fullbody.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
<META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE">
<META HTTP-EQUIV="EXPIRES" CONTENT="Mon, 22 Jul 2002 11:12:01 GMT">
<!-- InstanceBeginEditable name="doctitle" -->
<title>Jumbo.cl Back Office Local</title>
<!-- InstanceEndEditable -->

<!-- InstanceBeginEditable name="head" -->
<SCRIPT LANGUAGE="JavaScript" SRC="CalendarPopup.js"></SCRIPT>
<SCRIPT LANGUAGE="JavaScript" SRC="funciones.js"></SCRIPT>
<SCRIPT LANGUAGE="JavaScript">document.write(getCalendarStyles());</SCRIPT>
<!-- InstanceEndEditable -->

<link href="estilos.css" rel="stylesheet" type="text/css">
<!--link href="../Prototipo/default.css" rel="stylesheet" type="text/css"-->
<style type="text/css">
<!--
.style1 {color: #666666}
-->
</style>
</head>

<body>
<link rel="stylesheet" href="menu/menu.css">
<script language="JavaScript" src="menu/menu.js"></script>
<script language="JavaScript" src="menu/menu_tpl.js"></script>
<script language="JavaScript" src="menu/menu_items.js"></script>
<script language="JavaScript" src="popup.js"></script>

<SCRIPT LANGUAGE="JavaScript">window.name='winpedido'</SCRIPT>
 
 
<table width="780" height="100%" border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td height="78" valign="top">
	
	<TABLE width="100%" height=59 border=0 align="center" cellpadding="0" cellspacing="0" bgcolor="#ffffff">
	  <TR>
		<TD width=275 height="59" align=left class=user><img src="img/header2.jpg" width="275" height="60"></TD>
		<TD width=505 align=left valign="bottom" background="img/bg-1.jpg" class=user><table width="90%"  border="0" align="center" cellpadding="0" cellspacing="2">
          <tr>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td><div align="right" class="infoBL">Usuario: {hdr_nombre} | Local: {hdr_local} | {hdr_fecha} </div></td>
          </tr>
        </table></TD>
	  </TR>
	</TABLE>
	<TABLE width="100%" height=19 border=0 align="center" cellpadding="0" cellspacing="0" bgcolor="#f1f0e9" style="border-top:1px solid #ABABAB; border-bottom:1px solid #ABABAB">
	  <TR>
		<TD align=left bgcolor="#FFFFFF" class=user></TD>
		</TR>
	</TABLE>

	
	</td>
  </tr>
  <tr height="400">
    <td valign="top" bgcolor="#FFFFFF">
      <table border=0 width="100%" class='ContentTitle'>
        <tr>
          <td width="53%" height="20" class='HeaderTitle'><!-- InstanceBeginEditable name="Titulo" -->
				Monitor de Pedidos<!-- InstanceEndEditable --></td>
          <td width="47%" class='HeaderTitle'><!-- InstanceBeginEditable name="Botonera" --><!-- InstanceEndEditable --></td>
        </tr>
      </table>
	  <br>
      <table width="100%"  border="0" cellspacing="2" cellpadding="2">
        <tr valign="top">
          <td width="71%"><!-- InstanceBeginEditable name="Izquierda" -->

	<script src="validacion.js"></script>
	<script language="JavaScript">
	  	function submitForm1(flag){
	  		
	  		df = document.form1;
	  		df.id_pedido.value = document.getElementById('txt_id_pedido').value;
			// reglas de validacion
			//df.id_pedido.obligatorio=true;
			if (df.id_pedido.value == ""){
				alert("Debe ingresar un Nº de Pedido");			
				return false;
			}
			if (validar_solonumero(document.forma3.id_ped, "Nº Pedido es un campo numerico")) return false;
			df.id_pedido.numerico=true;
			df.id_pedido.label='Nº Pedido';
			
			if(verify(flag,df)) df.submit();

	  	}
	  	function submitForm2(){
	  		var valid = true;
	  		df=document.form2;
			df.id_local_fact.value = document.getElementById('sel_loc_fact').value;
	  		df.id_estado.value = document.getElementById('estado').value;
			df.id_zona.value = document.getElementById('zona').value;
	  		df.fecha.value = document.getElementById('txt_fecha').value;
	  		df.fechafin.value = document.getElementById('txt_fechafin').value;
			if(document.getElementById('radio1').checked == true)
			 		df.tipo_fecha.value = "picking";
			else if(document.getElementById('radio2').checked == true)
			 		df.tipo_fecha.value = "despacho";			

	  		if ((df.fecha.value == "" && df.fechafin.value != "") ||
	  			(df.fecha.value != "" && df.fechafin.value == "")){
	  			alert("Debe ingresar Fecha de Inicio y Fecha de Fin");	
	  			valid = false;
	  		}
	  		if (df.fecha.value == "" && df.fechafin.value == "" && df.id_estado.value == "-1" ){
	  			alert("Debe ingresar rango de fechas o seleccionar un estado");
	  			valid = false;
	  		}
	  		

	  		
				if (df.fecha.value != "" && df.fechafin.value != "" ){
				    var fecha1 = df.fecha.value.substring(0,4)+
						df.fecha.value.substring(5,7)+
						df.fecha.value.substring(10,8);
					var fecha2 = df.fechafin.value.substring(0,4)+
						df.fechafin.value.substring(5,7)+
						df.fechafin.value.substring(10,8);
						if (fecha1 > fecha2){
							alert("La fecha de inicio es mayor a la fecha de fin, revise por favor");
							valid = false;
						}
			  	  }
	  		
	  		if (valid)
	  			df.submit();
	  	}	  		  	
	  </script>
	   <!-- Formulario buscar por id_pedido -->
		<form name="form1" method="get" action="ViewMonitorPedidos">
			<input type="hidden" name="id_pedido" value="">
		</form>
		<!-- Formulario buscar por fecha -->
		<form name="form2" method="get" action="ViewMonitorPedidos">
			<input type="hidden" name="fecha" value="">
			<input type="hidden" name="tipo_fecha" value="">
			<input type="hidden" name="fechafin" value="">
			<input type="hidden" name="id_estado" value="">	
			<input type="hidden" name="id_local_fact" value="">
			<input type="hidden" name="id_zona" value="">
		</form>
		<!-- Fin formularios -->    
          
				<table width="90%" border="0" align="center" cellpadding="0"
					cellspacing="0">
					<tr>
						<td>

						<SCRIPT LANGUAGE="JavaScript" ID="js17">
							var ayer = new Date(30,4,2006,12,0,0,0);
							var cal1 = new CalendarPopup("testdiv1");
							cal1.offsetX = -140;
							cal1.offsetY = -50;
						</SCRIPT>
						<form name="forma3">
						<fieldset><legend>Buscador de Pedidos </legend>
						<table width="100%" border="0" cellspacing="2" cellpadding="0">
							<tr>
								<td width="" colspan="2">N&deg; Pedido</td>
								<td width="">&nbsp;</td>
								<td width="">&nbsp;</td>
								<td width="">&nbsp;</td>
							</tr>
							<!-- JScript Calendario -->

							
							<tr>
								<td colspan="2"><input name = "id_ped" type="text" id="txt_id_pedido" value="{id_pedido}" maxlength = "10"  size="10" >
									<input type="button" class="cmd" value="Buscar"
										onClick="submitForm1(0);">
								</td>
								<td>&nbsp;</td>
								<td>&nbsp;</td>
								<td>&nbsp;</td>
							</tr>
							
							<tr>
							  <td>Zona de Despacho</td>
							  <td>Local Facturación</td>
							  <td>Estados</td>
							  <td>Fecha
								 <input name="tipo_fecha" type="radio" value="picking" {chk1} id="radio1">
								  Picking <input name="tipo_fecha" type="radio" value="despacho" {chk2} id="radio2"> Despacho
							  </td>
							  <td>&nbsp;</td>
						  </tr>
							<tr>
							  <td>
								<select name="zona" id="zona" class="letracombo">
									<option value="-1">TODOS</option>
									<!-- BEGIN DYNAMIC: zonas -->
									<option value="{option_id_zona}" {sel_zona}>{option_nombre}</option>
									<!-- END DYNAMIC: zonas -->
								</select>
							  </td>
							  <td>
								  <select name="sel_loc_fact" id="sel_loc_fact" class="letracombo">
										<option value="-1">TODOS</option>
										<!-- BEGIN DYNAMIC: locales -->
										<option value="{id_local_fact}" {sel_loc_fact}>{local_fact_nom}</option>
										<!-- END DYNAMIC: locales -->
					                </select>
							</td>
							  <td> 
									<select name="estado" id="estado" class="letracombo">	
										<option value="-1" {sel2} >Todos</option>												
										<!-- BEGIN DYNAMIC: estados -->
										<option value="{id_estado}" {sel2} >{estado}</option>
										<!-- END DYNAMIC: estados -->
									</select>									
							  </td>
							  <td>
									Entre 
									<input type="text" id="txt_fecha" value="{fecha}" onClick="cal1.select(document.forms[2].txt_fecha,'anchor1','yyyy-MM-dd'); return false;" readonly="true" size="10" >
									<a href="#"	onClick="cal1.select(document.forms[2].txt_fecha,'anchor1','yyyy-MM-dd'); return false;"
										name="anchor1" id="anchor1"> <img src="img/cal.gif" width="16" height="16" border="0"></a> y
									<input type="text" id="txt_fechafin" value="{fecha_fin}" onClick="cal1.select(document.forms[2].txt_fechafin,'anchor2','yyyy-MM-dd'); return false;" readonly="true" size="10" >
									<a href="#"	onClick="cal1.select(document.forms[2].txt_fechafin,'anchor2','yyyy-MM-dd'); return false;"
										name="anchor2" id="anchor2"> <img src="img/cal.gif" width="16" height="16" border="0"></a>						
							  </td>
							  <td><input type="button" class="cmd" value="Buscar" onClick="submitForm2();"></td>
							  </tr>
						</table>
						</fieldset>
						</form>
						</td>
					</tr>
				</table>
				<div id="testdiv1" style="position:absolute;visibility:hidden;background-color:white;layer-background-color:white;"></div>
				<br>
				<table width="750" border="1" align="center" cellpadding="2" cellspacing="0" class="tabla21">
					<tr>
						<th width="40">N&deg; OP</th>
						<th width="70">Zona Despacho</th>
						<th width="50">N&deg;  <br>Jornada</th>
						<th width="60">Fecha <BR>Picking</th>
						<th width="99">Horario <BR>Picking</th>
						<th width="30">Cant Prods.</th>
						<th width="60">Fecha Despacho</th>
						<th width="55">Hora Despacho</th>
						<th>Local <BR>Facturación</th>
						<th width="60">Estado</th>
						<th width="60">Acciones</th>
					</tr>
					<!-- BEGIN DYNAMIC: listado -->
					<tr bgcolor="{color_fondo_op}">
						<td {borderstyle}>
						<div align="center">{cam_color1}{id_pedido}{fl}{cam_color2}</div>
						</td>
						<td {borderstyle}>
						<div align="center">{cam_color1}{zona_des}{cam_color2}</div>
						</td>
						<td {borderstyle}>
						<div align="center">{cam_color1}<a href="ViewJornada?id_jornada={n_jornada}">{n_jornada}</a>{cam_color2}</div>
						</td>
						<td {borderstyle}>
						<div align="center">{cam_color1}{f_picking}{cam_color2}</div>
						</td>
						<td {borderstyle}>
						<div align="center">{cam_color1}{horario_jor}{cam_color2}</div>
						</td>						
						<td {borderstyle}>
						<div align="center">{cam_color1}{n_productos}{cam_color2}</div>
						</td>
						<td {borderstyle}>
						<div align="center">{cam_color1}{f_despacho}{cam_color2}</div>
						</td>
						<td {borderstyle}>
						<div align="center">{cam_color1}{h_despacho}{cam_color2}</div>
						</td>
						<td {borderstyle}>{cam_color1}{local_fact} {cam_color2}</td>
						<td {borderstyle}>{cam_color1}{estado}{imgEstado}{cam_color2}</td>
						<td {borderstyle}>
						<div align="center">{cam_color1}<a
							href="ViewDetallePedido?id_pedido={id_pedido}">Ver</a>{accion}{cam_color2}</div>
						</td>
					</tr>
					<!-- END DYNAMIC: listado -->
				</table>
				<table width="750" border="0" align="center" cellpadding="2"
					cellspacing="2">
					<tr>
						<td>
						<div align="center"><font color="red"><b>{mensaje}</b></font></div>
						<br/>
						<div align="left">
						<img src="img/leyenda.gif" alt=""/>
						</div>
						</td>
						<form name="pagform" method="get" action="ViewMonitorPedidos">
							<input type="hidden" name="fecha" value="{fecha}">
							<input type="hidden" name="fechafin" value="{fecha_fin}">
							<input	type="hidden" name="tipo_fecha" value="{tipo_fecha}">
							<input type="hidden" name="id_estado" value="{id_estado}">								
							<input type="hidden" name="id_zona" value="{id_zona}">
			
						<td width="190">
						<div align="right">
						<a href="ViewMonitorPedidos?pag={anterior}&fecha={fecha}&fechafin={fecha_fin}&id_estado={id_estado}&tipo_fecha={tipo_fecha}">{anterior_label}&nbsp;</a>
						P&aacute;g <select name="pag" onChange="submit(this.form);" {dis1} >
							<!--  BEGIN DYNAMIC: paginador -->
							<option value="{pag}"{sel}>{pag}</option>
						    <!--  END DYNAMIC: paginador -->
						</select>
						<a href="ViewMonitorPedidos?pag={siguiente}&fecha={fecha}&fechafin={fecha_fin}&id_estado={id_estado}&tipo_fecha={tipo_fecha}">{siguiente_label}&nbsp;</a>						
						</div>
						</td>
						</form>
					</tr>
				</table>
				<p>&nbsp;</p>
				<p>&nbsp;</p>
				<script>
					document.forma3.id_ped.numerico=true;
					document.forma3.id_ped.label = 'Id pedido';	
					document.forma3.id_ped.onkeypress = KeyIsNumber;
				</script>
				<!-- InstanceEndEditable --></td>
        </tr>
      </table>
      </td>
  </tr>
  <tr>
    <td>
	<TABLE width="100%" height=19 border=0 align="center" cellpadding="0" cellspacing="0" bgcolor="#f1f0e9" style="border-top:1px solid #ABABAB; border-bottom:1px solid #ABABAB">
	  <TR>
		<TD align=center bgcolor="#67b01a" class=infoBL><div align="center">Back Office Local - Jumbo.cl</div></TD>
		</TR>
	</TABLE>

	
	</td>
  </tr>
</table>
</body>
<!-- InstanceEnd --></html>
