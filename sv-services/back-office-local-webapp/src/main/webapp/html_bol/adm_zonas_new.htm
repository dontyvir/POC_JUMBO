<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><!-- InstanceBegin template="/Templates/fullbody.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
<META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE">
<META HTTP-EQUIV="EXPIRES" CONTENT="Mon, 22 Jul 2002 11:12:01 GMT">
<!-- InstanceBeginEditable name="doctitle" -->
<title>Jumbo.cl Back Office Local</title>
<!-- InstanceEndEditable -->

<!-- InstanceBeginEditable name="head" -->
<script language="JavaScript" src="funciones.js"></script>
<!-- InstanceEndEditable -->

<link href="estilos.css" rel="stylesheet" type="text/css">
<!--link href="../Prototipo/default.css" rel="stylesheet" type="text/css"-->
<style type="text/css">
<!--
.style1 {color: #666666}
-->
</style>
</head>
<body>
<link rel="stylesheet" href="menu/menu.css">
<script language="JavaScript" src="menu/menu.js"></script>
<script language="JavaScript" src="menu/menu_tpl.js"></script>
<script language="JavaScript" src="menu/menu_items.js"></script>
<table width="780" height="100%" border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td height="78" valign="top">
	<TABLE width="100%" height=59 border=0 align="center" cellpadding="0" cellspacing="0" bgcolor="#ffffff">
	  <TR>
		<TD width=275 height="59" align=left class=user><img src="img/header2.jpg" width="275" height="60"></TD>
		<TD width=505 align=left valign="bottom" background="img/bg-1.jpg" class=user><table width="90%"  border="0" align="center" cellpadding="0" cellspacing="2">
          <tr>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td><div align="right" class="infoBL">Usuario: {hdr_nombre} | Local: {hdr_local} | {hdr_fecha} </div></td>
          </tr>
        </table></TD>
	  </TR>
	</TABLE>
	<TABLE width="100%" height=19 border=0 align="center" cellpadding="0" cellspacing="0" bgcolor="#f1f0e9" style="border-top:1px solid #ABABAB; border-bottom:1px solid #ABABAB">
	  <TR>
		<TD align=left bgcolor="#FFFFFF" class=user></TD>
		</TR>
	</TABLE>
	</td>
  </tr>
  <tr height="400">
    <td valign="top" bgcolor="#FFFFFF">
      <table border=0 width="100%" class='ContentTitle'>
        <tr>
          <td width="53%" height="20" class='HeaderTitle'><!-- InstanceBeginEditable name="Titulo" -->Nueva Zona de Despacho<!-- InstanceEndEditable --></td>
          <td width="47%" class='HeaderTitle'><!-- InstanceBeginEditable name="Botonera" -->
            <div align="right">Crear Zona </div>
          <!-- InstanceEndEditable --></td>
        </tr>
      </table>
	  <br>
      <table width="100%"  border="0" cellspacing="2" cellpadding="2">
        <tr valign="top">
          <td width="71%"><!-- InstanceBeginEditable name="Izquierda" --> 
          
    <script language="JavaScript">

		function validar_form( form ) {		
			if( validar_obligatorio( form.nombre, "Es Obligación ingresar "+form.nombre.label ) ) return false;
			if( validar_obligatorio( form.desc, "Es Obligación ingresar "+form.desc.label ) ) return false;
			if( validar_obligatorio( form.tarifa_normal_alta, "Es Obligación ingresar "+form.tarifa_normal_alta.label ) ) return false;
			if( validar_obligatorio( form.orden, "Es Obligación ingresar "+form.orden.label ) ) return false;
			
			var val_tarifa_normal_alta  = parseFloat(form.tarifa_normal_alta.value);
			var val_tarifa_normal_media = parseFloat(form.tarifa_normal_media.value);
			var val_tarifa_normal_baja  = parseFloat(form.tarifa_normal_baja.value);
			var val_tarifa_economica    = parseFloat(form.tarifa_economica.value);
			var val_tarifa_express      = parseFloat(form.tarifa_express.value);
			var val_monto_descuento_cat = parseFloat(form.monto_descuento_cat.value);
			var val_monto_descuento_tbk = parseFloat(form.monto_descuento_tbk.value);
			var val_monto_descuento_par = parseFloat(form.monto_descuento_par.value);

			//Monto Minimo de Descuento
			var val_monto_minimo = parseFloat(form.MontoMinimo.value);
			
			if(val_tarifa_normal_alta == 0){
				 alert ("El precio debe ser superior a 0");
				 form.tarifa_normal_alta.focus();
				 return false;
			 }
			if( validar_obligatorio( form.tarifa_normal_media, "Es Obligación ingresar "+form.tarifa_normal_media.label ) ) return false;
			if(val_tarifa_normal_media == 0){
				 alert ("El precio debe ser superior a 0");
				 form.tarifa_normal_media.focus();
				 return false;
			 }
			if( validar_obligatorio( form.tarifa_normal_baja, "Es Obligación ingresar "+form.tarifa_normal_baja.label ) ) return false;
			if(val_tarifa_normal_baja == 0){
				 alert ("El precio debe ser superior a 0");
				 form.tarifa_normal_baja.focus();
				 return false;
			}
			if(val_tarifa_normal_alta<val_tarifa_normal_media){
                alert ("El precio medio debe ser menor que el precio alto");
				return false;
			}
			if(val_tarifa_normal_media<val_tarifa_normal_baja){
			 	 alert ("El precio bajo debe ser menor que el precio medio");
				 return false;
			}
			if(val_tarifa_normal_alta<val_tarifa_normal_baja){
			 	 alert ("El precio bajo debe ser menor que el precio alto");
				 return false;
			}
			if(val_tarifa_normal_alta == val_tarifa_normal_media ||val_tarifa_normal_alta == val_tarifa_normal_baja || val_tarifa_normal_media == val_tarifa_normal_baja){
				alert ("los precios deben ser distintos");
				return false;				
			}
            if( validar_obligatorio( form.tarifa_economica, "Es Obligación ingresar "+form.tarifa_economica.label ) ) return false;
		    if(val_tarifa_economica <= 0){
                 alert ("La Tarifa Económica debe ser superior a 0");
                 form.tarifa_economica.focus();
                 return false;
            }
			if( validar_obligatorio( form.tarifa_express, "Es Obligación ingresar "+form.tarifa_express.label ) ) return false;
            if(val_tarifa_express <= 0){
                 alert ("La Tarifa Express debe ser superior a 0");
                 form.tarifa_express.focus();
                 return false;
            }
			
            if( validar_obligatorio( form.monto_descuento_cat, "Es Obligación ingresar "+form.monto_descuento_cat.label ) ) return false;
            if (val_monto_descuento_cat <= 0){
                alert ("El Monto de Descuento para CAT debe ser superior a 0");
                form.monto_descuento_cat.focus();
                return false;
            }else if (val_monto_descuento_cat < val_monto_minimo){
                alert ("El Monto de Descuento para CAT debe ser igual o superior a $"+ val_monto_minimo);
                form.monto_descuento_cat.focus();
                return false;
            }
            
            if( validar_obligatorio( form.monto_descuento_tbk, "Es Obligación ingresar "+form.monto_descuento_tbk.label ) ) return false;
            if (val_monto_descuento_tbk <= 0){
                alert ("El Monto de Descuento para TBK debe ser superior a 0");
                form.monto_descuento_tbk.focus();
                return false;
            }else if (val_monto_descuento_tbk < val_monto_minimo){
                alert ("El Monto de Descuento para TBK debe ser igual o superior a $"+ val_monto_minimo);
                form.monto_descuento_tbk.focus();
                return false;
            }
            
            if( validar_obligatorio( form.monto_descuento_par, "Es Obligación ingresar "+form.monto_descuento_par.label ) ) return false;
            if (val_monto_descuento_par <= 0){
                alert ("El Monto de Descuento para PAR debe ser superior a 0");
                form.monto_descuento_par.focus();
                return false;
            }else if (val_monto_descuento_par < val_monto_minimo){
                alert ("El Monto de Descuento para PAR debe ser igual o superior a $"+ val_monto_minimo);
                form.monto_descuento_par.focus();
                return false;
            }
            
			return true;
		}
	</script>
			<form name="forma1" method="post" action="AgregaZonaDespacho" onSubmit="return validar_form(this);">
				<input type = "hidden" name = "url" value = "ViewZonasDespacho">
				<input type = "hidden" name = "MontoMinimo" value = "{MontoMinimo}">
                
              <table width="689"  border="0" align="center" cellpadding="2" cellspacing="2">
                <tr> 
                  <td width="165">Nombre</td>
                  <td width="510"><input name="nombre" type="text" value="{nombre}" maxlength = "50" onpaste = "return false;" onKeydown="if (event.ctrlKey && (String.fromCharCode(event.keyCode).toLowerCase() == 'c' || String.fromCharCode(event.keyCode).toLowerCase() == 'v')) { event.keyCode = 0; }" onkeypress='key = window.event.keyCode; keychar = String.fromCharCode(key); keychar = keychar.toLowerCase(); if (!(("abcdefghijklmnñopqrstuvwxyz0123456789_ ").indexOf(keychar) > -1)) window.event.keyCode = 0;'></td>
                </tr>
                <tr> 
                  <td>Descripci&oacute;n</td>
                  <td><input name="desc" type="text" value="{desc}" size="50" maxlength = "100" onpaste = "return false;" onKeydown="if (event.ctrlKey && (String.fromCharCode(event.keyCode).toLowerCase() == 'c' || String.fromCharCode(event.keyCode).toLowerCase() == 'v')) { event.keyCode = 0; }" onkeypress='key = window.event.keyCode; keychar = String.fromCharCode(key); keychar = keychar.toLowerCase(); if (!(("abcdefghijklmnñopqrstuvwxyz0123456789. ").indexOf(keychar) > -1)) window.event.keyCode = 0;'></td>
                </tr>
                <tr> 
                  <td>Tarifa Normal Alta</td>
                  <td><input name="tarifa_normal_alta" type="text" value="{tarifa_normal_alta}" maxlength = "6" onpaste = "return false;" onKeydown="if (event.ctrlKey && (String.fromCharCode(event.keyCode).toLowerCase() == 'c' || String.fromCharCode(event.keyCode).toLowerCase() == 'v')) { event.keyCode = 0; }"></td>
                </tr>
                <tr> 
                  <td>Tarifa Normal Media</td>
                  <td><input name="tarifa_normal_media" type="text" value="{tarifa_normal_media}" maxlength = "6" onpaste = "return false;" onKeydown="if (event.ctrlKey && (String.fromCharCode(event.keyCode).toLowerCase() == 'c' || String.fromCharCode(event.keyCode).toLowerCase() == 'v')) { event.keyCode = 0; }"></td>
                </tr>
                <tr> 
                  <td>Tarifa Normal Baja</td>
                  <td><input name="tarifa_normal_baja" type="text" value="{tarifa_normal_baja}" maxlength = "6" onpaste = "return false;" onKeydown="if (event.ctrlKey && (String.fromCharCode(event.keyCode).toLowerCase() == 'c' || String.fromCharCode(event.keyCode).toLowerCase() == 'v')) { event.keyCode = 0; }"></td>
                </tr>
                <tr> 
                  <td>Tarifa Economica</td>
                  <td><input name="tarifa_economica" type="text" value="{tarifa_economica}" maxlength = "6" onpaste = "return false;" onKeydown="if (event.ctrlKey && (String.fromCharCode(event.keyCode).toLowerCase() == 'c' || String.fromCharCode(event.keyCode).toLowerCase() == 'v')) { event.keyCode = 0; }"> 
                    &nbsp;&nbsp;&nbsp;
					<label><input type="checkbox" name="estado_tarifa_economica" value="1" id="estado_tarifa_economica" {estado_tarifa_economica}>Activo</label> </td>
                </tr>
                <tr> 
                  <td>Tarifa Express</td>
                  <td><input name="tarifa_express" type="text" value="{tarifa_express}" maxlength = "6" onpaste = "return false;" onKeydown="if (event.ctrlKey && (String.fromCharCode(event.keyCode).toLowerCase() == 'c' || String.fromCharCode(event.keyCode).toLowerCase() == 'v')) { event.keyCode = 0; }"> 
                    &nbsp;&nbsp;&nbsp; <label><input type="checkbox" name="estado_tarifa_express" value="1" id="estado_tarifa_express" {estado_tarifa_express}>Activo</label> </td>
                </tr>
                <tr> 
                  <td valign="top">Mensaje Calendario Despacho</td>
                  <td><textarea name="msg_cal_despacho" cols="50" rows="5" onpaste="return false;" onKeydown="if (event.ctrlKey && (String.fromCharCode(event.keyCode).toLowerCase() == 'c' || String.fromCharCode(event.keyCode).toLowerCase() == 'v')) { event.keyCode = 0; }">{msg_cal_despacho}</textarea></td>
                </tr>
                <tr> 
                  <td>Orden </td>
                  <td><input name="orden" type="text" value="{orden}" maxlength = "6" onpaste = "return false;" onKeydown="if (event.ctrlKey && (String.fromCharCode(event.keyCode).toLowerCase() == 'c' || String.fromCharCode(event.keyCode).toLowerCase() == 'v')) { event.keyCode = 0; }"></td>
                </tr>
                <tr>
                  <td>Regalos para clientes</td>
                  <td><label><input type="checkbox" name="regalo_clientes" value="1" id="regalo_clientes" {regalo_clientes}>Activo</label></td>
                </tr>
                <tr> 
                  <td>Descuento Automático en Despacho</td>
                  <td><table width="240" border="0">
                    <tr>
	                    <td width="116" align="center">Medio de Pago </td>
	                    <td width="35" align="left">Activo Primera Compra</td>
	                    <td width="75" align="center">Monto L&iacute;mite Primera Compra</td>
                      <td width="35" align="left">Activo Siempre</td>
                      <td width="75" align="center">Monto L&iacute;mite Siempre</td>
                    </tr>
                    <tr>
                      <td align="center">Tarjetas M&aacute;s (CAT)</td>
                    	<td align="center"><input type="checkbox" name="estado_descuento_pc_cat" value="2" id="estado_descuento_pc_cat" {estado_descuento_pc_cat} onchange="activa_monto_descuento_pc(document.forma1);" onclick="activa_monto_descuento_pc(document.forma1);"></td>
                      <td align="center"><input name="monto_descuento_pc_cat" type="text" id="monto_descuento_pc_cat" value="{monto_descuento_pc_cat}" size="8" maxlength = "6" onpaste = "return false;" onKeydown="if (event.ctrlKey && (String.fromCharCode(event.keyCode).toLowerCase() == 'c' || String.fromCharCode(event.keyCode).toLowerCase() == 'v')) { event.keyCode = 0; }"></td>
                      <td align="center"><input type="checkbox" name="estado_descuento_cat" value="1" id="estado_descuento_cat" {estado_descuento_cat} onchange="activa_monto_descuento(document.forma1);" onclick="activa_monto_descuento(document.forma1);"></td>
                      <td align="center"><input name="monto_descuento_cat" type="text" id="monto_descuento_cat" value="{monto_descuento_cat}" size="8" maxlength = "6" onpaste = "return false;" onKeydown="if (event.ctrlKey && (String.fromCharCode(event.keyCode).toLowerCase() == 'c' || String.fromCharCode(event.keyCode).toLowerCase() == 'v')) { event.keyCode = 0; }"></td>
                    </tr>
                    <tr>
	                    <td align="center">Transbank (TBK)</td>
                    	<td align="center"><input type="checkbox" name="estado_descuento_pc_tbk" value="2" id="estado_descuento_pc_tbk" {estado_descuento_pc_tbk} onchange="activa_monto_descuento_pc(document.forma1);" onclick="activa_monto_descuento_pc(document.forma1);"></td>
                      <td align="center"><input name="monto_descuento_pc_tbk" type="text" id="monto_descuento_pc_tbk" value="{monto_descuento_pc_tbk}" size="8" maxlength = "6" onpaste = "return false;" onKeydown="if (event.ctrlKey && (String.fromCharCode(event.keyCode).toLowerCase() == 'c' || String.fromCharCode(event.keyCode).toLowerCase() == 'v')) { event.keyCode = 0; }"></td>
                      <td align="center"><input type="checkbox" name="estado_descuento_tbk" value="1" id="estado_descuento_tbk" {estado_descuento_tbk} onchange="activa_monto_descuento(document.forma1);" onclick="activa_monto_descuento(document.forma1);"></td>
                      <td align="center"><input name="monto_descuento_tbk" type="text" id="monto_descuento_tbk" value="{monto_descuento_tbk}" size="8" maxlength = "6" onpaste = "return false;" onKeydown="if (event.ctrlKey && (String.fromCharCode(event.keyCode).toLowerCase() == 'c' || String.fromCharCode(event.keyCode).toLowerCase() == 'v')) { event.keyCode = 0; }"></td>
                    </tr>
                    <tr>
                      <td align="center">Tarjeta Paris (PAR)</td>
	                    <td align="center"><input type="checkbox" name="estado_descuento_pc_par" value="2" id="estado_descuento_pc_par" {estado_descuento_pc_par} onchange="activa_monto_descuento_pc(document.forma1);" onclick="activa_monto_descuento_pc(document.forma1);"></td>
                      <td align="center"><input name="monto_descuento_pc_par" type="text" id="monto_descuento_pc_par" value="{monto_descuento_pc_par}" size="8" maxlength = "6" onpaste = "return false;" onKeydown="if (event.ctrlKey && (String.fromCharCode(event.keyCode).toLowerCase() == 'c' || String.fromCharCode(event.keyCode).toLowerCase() == 'v')) { event.keyCode = 0; }"></td>
                      <td align="center"><input type="checkbox" name="estado_descuento_par" value="1" id="estado_descuento_par" {estado_descuento_par} onchange="activa_monto_descuento(document.forma1);" onclick="activa_monto_descuento(document.forma1);"></td>
                      <td align="center"><input name="monto_descuento_par" type="text" id="monto_descuento_par" value="{monto_descuento_par}" size="8" maxlength = "6" onpaste = "return false;" onKeydown="if (event.ctrlKey && (String.fromCharCode(event.keyCode).toLowerCase() == 'c' || String.fromCharCode(event.keyCode).toLowerCase() == 'v')) { event.keyCode = 0; }"></td>
                    </tr>
                  </table></td>
                </tr>
                <tr> 
                  <td>&nbsp;</td>
                  <td><input type="submit" name="Button" value="Guardar"> <input type="button" name="Button" value="Cancelar" onClick="location.href='ViewZonasDespacho'"></td>
                </tr>
              </table>
                </form>
                <br>
                <br>
           <script>
               document.forma1.nombre.label = 'Nombre';	
               document.forma1.desc.label = 'Descripcion';	

               document.forma1.tarifa_normal_alta.numerico=true;
               document.forma1.tarifa_normal_alta.label = 'Tarifa Normal Alta';	
               document.forma1.tarifa_normal_alta.onkeypress = KeyIsNumber;

               document.forma1.tarifa_normal_media.numerico=true;
               document.forma1.tarifa_normal_media.label = 'Tarifa Normal Media';	
               document.forma1.tarifa_normal_media.onkeypress = KeyIsNumber;

               document.forma1.tarifa_normal_baja.numerico=true;
               document.forma1.tarifa_normal_baja.label = 'Tarifa Normal Baja';	
               document.forma1.tarifa_normal_baja.onkeypress = KeyIsNumber;
	
               document.forma1.tarifa_economica.numerico=true;
               document.forma1.tarifa_economica.label = 'Tarifa Económica';	
               document.forma1.tarifa_economica.onkeypress = KeyIsNumber;
	
               document.forma1.tarifa_express.numerico=true;
               document.forma1.tarifa_express.label = 'Tarifa Express';	
               document.forma1.tarifa_express.onkeypress = KeyIsNumber;
	
               document.forma1.orden.numerico=true;
               document.forma1.orden.label = 'Orden';	
               document.forma1.orden.onkeypress = KeyIsNumber;	
	
	           document.forma1.monto_descuento_cat.numerico=true;
               document.forma1.monto_descuento_cat.label = 'Monto Descuento CAT';	
               document.forma1.monto_descuento_cat.onkeypress = KeyIsNumber;	

               document.forma1.monto_descuento_tbk.numerico=true;
               document.forma1.monto_descuento_tbk.label = 'Monto Descuento TBK';	
               document.forma1.monto_descuento_tbk.onkeypress = KeyIsNumber;	
               
               document.forma1.monto_descuento_par.numerico=true;
               document.forma1.monto_descuento_par.label = 'Monto Descuento PAR';	
               document.forma1.monto_descuento_par.onkeypress = KeyIsNumber;	
               
               document.forma1.monto_descuento_cat.disabled = !document.forma1.estado_descuento_cat.checked;
               document.forma1.monto_descuento_tbk.disabled = !document.forma1.estado_descuento_tbk.checked;
               document.forma1.monto_descuento_par.disabled = !document.forma1.estado_descuento_par.checked;
               
               document.forma1.monto_descuento_pc_cat.disabled = !document.forma1.estado_descuento_pc_cat.checked;
               document.forma1.monto_descuento_pc_tbk.disabled = !document.forma1.estado_descuento_pc_tbk.checked;
               document.forma1.monto_descuento_pc_par.disabled = !document.forma1.estado_descuento_pc_par.checked;
               
               
               function activa_monto_descuento(form){
                   form.monto_descuento_cat.disabled = !form.estado_descuento_cat.checked;
                   form.monto_descuento_tbk.disabled = !form.estado_descuento_tbk.checked;
                   form.monto_descuento_par.disabled = !form.estado_descuento_par.checked;
               }
               function activa_monto_descuento_pc(form){
                   form.monto_descuento_pc_cat.disabled = !form.estado_descuento_pc_cat.checked;
                   form.monto_descuento_pc_tbk.disabled = !form.estado_descuento_pc_tbk.checked;
                   form.monto_descuento_pc_par.disabled = !form.estado_descuento_pc_par.checked;
               }
           </script>
          </td>
        </tr>
      </table>
      </td>
  </tr>
  <tr>
    <td>
	<TABLE width="100%" height=19 border=0 align="center" cellpadding="0" cellspacing="0" bgcolor="#f1f0e9" style="border-top:1px solid #ABABAB; border-bottom:1px solid #ABABAB">
	  <TR>
		<TD align=center bgcolor="#67b01a" class=infoBL><div align="center">Back Office Local - Jumbo.cl</div></TD>
		</TR>
	</TABLE>

	
	</td>
  </tr>
</table>
</body>
</html>
